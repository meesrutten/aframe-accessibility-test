<html>
  <head>
    <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
        <a-assets>
            <a-asset-item id="gear_vr_controller-obj" src="gear_vr_controller.obj"></a-asset-item>
            <a-asset-item id="gear_vr_controller-mtl" src="gear_vr_controller.mtl"></a-asset-item>
        </a-assets>
        <a-text value="WebVR accessible menu" position="0 5 -6" color="black" align="center"></a-text>

        <a-box class="box" position="-2.75 2 -6" rotation="0 10 0" color="#4CC3D9">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="-1.25 2 -6" rotation="0 5 0" color="#123456">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="0 2 -6" rotation="0 0 0" color="#214365">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="1.25 2 -6" rotation="0 -5 0" color="#002266">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="2.75 2 -6" rotation="0 -10 0" color="#220066">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>

        <a-box class="box" position="-2.75 .5 -6" rotation="0 10 0" color="#4CC3D9">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="-1.25 .5 -6" rotation="0 5 0" color="#123456">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="0 .5 -6" rotation="0 0 0" color="#214365">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="1.25 .5 -6" rotation="0 -5 0" color="#002266">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="2.75 .5 -6" rotation="0 -10 0" color="#220066">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>

        <a-box class="box" position="-2.75 -1 -6" rotation="0 10 0" color="#4CC3D9">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="-1.25 -1 -6" rotation="0 5 0" color="#123456">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="0 -1 -6" rotation="0 0 0" color="#214365">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="1.25 -1 -6" rotation="0 -5 0" color="#002266">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="2.75 -1 -6" rotation="0 -10 0" color="#220066">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>

        <a-box class="box" position="-2.75 -2.5 -6" rotation="0 10 0" color="#4CC3D9">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="-1.25 -2.5 -6" rotation="0 5 0" color="#123456">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="0 -2.5 -6" rotation="0 0 0" color="#214365">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="1.25 -2.5 -6" rotation="0 -5 0" color="#002266">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="2.75 -2.5 -6" rotation="0 -10 0" color="#220066">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>

        <a-box class="box" position="-2.75 -4 -6" rotation="0 10 0" color="#4CC3D9">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="-1.25 -4 -6" rotation="0 5 0" color="#123456">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="0 -4 -6" rotation="0 0 0" color="#214365">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="1.25 -4 -6" rotation="0 -5 0" color="#002266">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
        <a-box class="box" position="2.75 -4 -6" rotation="0 -10 0" color="#220066">
            <a-animation attribute="scale" easing="ease-out" dur="10000" begin="scale" to="100 100 100"></a-animation>
        </a-box>
      <!-- <a-sphere position="0 1.25 -5" radius="1.25" color="#EF2D5E"></a-sphere> -->
      <!-- <a-cylinder position="1 0.75 -6" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder> -->
      <!-- <a-plane position="0 0 -4" rotation="-90 0 0" width="100" height="100" color="#7BC8A4"></a-plane> -->
      <a-sky color="#ECECEC"></a-sky>
      <a-camera wasd-controls-enabled="false">
      <a-entity src="#gear_vr_controller-obj" mtl="#gear_vr_controller-mtl" gearvr-controls="hand: right"></a-entity>
    </a-scene>
    <script>
        // arrow keys are only triggered by onkeydown, not onkeypress
        // Set keycodes to device controller buttons
        //     keycodes are:

        //     left = 37
        //     up = 38
        //     right = 39
        //     down = 40
        let boxIndex = -1
        const boxes = document.querySelectorAll('.box')

        boxes.forEach(box => {
            //Can be changed to any visual styling
            box.setAttribute("height", "1")
            box.setAttribute("width", "1")
            box.setAttribute("depth", ".1")
        })

        document.addEventListener('keydown', function(e){
            e.preventDefault()
            console.log(e.keyCode);
            console.log(boxIndex);
            if(e.keyCode === 13) {
                //Can be changed to any visual styling
                boxes[boxIndex].setAttribute("rotation", "0 0 0")
                boxes[boxIndex].emit('scale')
            }
            if(e.keyCode === 37 || e.keyCode === 39 || e.keyCode === 40 || e.keyCode === 38) {
                if (e.keyCode === 37) {
                    //left
                    boxIndex--
                }
                if (e.keyCode === 39) {
                    //right
                    boxIndex++
                }
                if (e.keyCode === 38) {
                    //up
                    boxIndex-=5
                    boxes.forEach(box => {
                        const position = box.getAttribute("position")
                        position.y -= 1.5
                        box.setAttribute("position", position)
                    })
                }
                if (e.keyCode === 40) {
                    //down
                    boxIndex === -1 ? boxIndex+=1 : boxIndex += 5
                    boxes.forEach(box => {
                        const position = box.getAttribute("position")
                        position.y += 1.5
                        box.setAttribute("position", position)
                    })
                }
                if (boxIndex >= boxes.length) {
                    boxIndex = 0
                }
                if (boxIndex <= -1) {
                    boxIndex = boxes.length - 1
                }
                boxes.forEach( box => {
                    //Can be changed to any visual styling
                    box.setAttribute("height", "1")
                    box.setAttribute("width", "1")
                    box.setAttribute("depth", ".1")
                } )
                //Can be changed to any visual styling
                boxes[boxIndex].setAttribute("height", "1.25")
                boxes[boxIndex].setAttribute("width", "1.25")
                // }
            }
            // boxes.forEach(function (box) {
            //     console.log(box);
            //     box.setAttribute("color", "black")
            // })
        })
    </script>
</body>
</html>